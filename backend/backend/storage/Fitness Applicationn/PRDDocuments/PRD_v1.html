<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PRD for Fitness Application</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        :root {
            --primary-navy: #1a1a2e;
            --midnight-blue: #2a2a3e;
            --deep-purple: #3a2a4e;
            --accent-pink: #ff69b4;
            --accent-cyan: #00ffcc;
            --accent-turquoise: #00e5b3;
            --text-primary: #1a1a1a;
            --bg-white: #ffffff;
            --bg-gray: #f5f5f7;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
            color: var(--text-primary);
            background: var(--bg-white);
            line-height: 1.6;
        }
        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: var(--primary-navy);
            color: var(--bg-white);
            padding: 30px 20px;
            text-align: center;
        }
        header h1 {
            margin: 0;
            font-size: 2rem;
        }
        nav.toc {
            background: var(--bg-gray);
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        nav.toc ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        nav.toc a {
            text-decoration: none;
            color: var(--primary-navy);
            font-weight: 600;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.3s;
        }
        nav.toc a:hover {
            background: var(--accent-cyan);
            color: var(--primary-navy);
        }
        section {
            margin-bottom: 40px;
        }
        section h2 {
            border-left: 5px solid var(--accent-pink);
            padding-left: 10px;
            color: var(--deep-purple);
            margin-top: 0;
        }
        .list {
            margin: 10px 0;
            padding-left: 20px;
        }
        .list li {
            margin-bottom: 5px;
        }
        .use-case {
            border: 1px solid var(--bg-gray);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            background: var(--bg-white);
        }
        .use-case h3 {
            margin-top: 0;
            color: var(--midnight-blue);
        }
        .flow {
            margin-left: 20px;
        }
        footer {
            background: var(--primary-navy);
            color: var(--bg-white);
            text-align: center;
            padding: 30px 20px;
            position: relative;
        }
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, var(--accent-pink), var(--accent-cyan), var(--accent-turquoise));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        @media (max-width: 768px) {
            nav.toc ul {
                flex-direction: column;
            }
            header h1 {
                font-size: 1.5rem;
            }
        }
        @media print {
            body {
                background: var(--bg-white);
                color: var(--text-primary);
            }
            nav.toc {
                display: none;
            }
            header, footer {
                background: none;
                color: var(--text-primary);
                padding: 0;
            }
            .container {
                padding: 0;
            }
            .use-case {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>PRD for Fitness Application</h1>
    </header>
    <div class="container">
        <nav class="toc">
            <ul>
                <li><a href="#executive-summary">Executive Summary</a></li>
                <li><a href="#scope">Scope</a></li>
                <li><a href="#business-goals">Business Goals</a></li>
                <li><a href="#use-cases">Use Cases</a></li>
                <li><a href="#non-functional-requirements">Non‑Functional Requirements</a></li>
            </ul>
        </nav>

        <section id="executive-summary">
            <h2>Executive Summary</h2>
            <p>The Fitness Application is a cross‑platform mobile solution that provides secure user registration with consent management, seamless BLE wearable integration, AI‑driven personalized workout recommendations, and adaptive coaching. The MVP focuses on establishing a compliant, privacy‑by‑design foundation and delivering core real‑time health tracking and intelligent workout planning, while deferring social community, nutrition tracking, and advanced gamification features to future releases.</p>
        </section>

        <section id="scope">
            <h2>Scope</h2>
            <h3>In Scope</h3>
            <ul class="list">
                <li>Secure user registration, authentication (OAuth 2.0 / OIDC) and GDPR/CCPA/HIPAA consent management</li>
                <li>BLE wearable discovery, pairing, and real‑time health data sync using FHIR resources</li>
                <li>AI‑driven personalized workout plan generation and adaptive in‑workout coaching</li>
                <li>Offline‑first data handling with encryption at rest and in transit (TLS 1.3)</li>
                <li>Core analytics and audit logging for compliance reporting</li>
            </ul>
            <h3>Out of Scope</h3>
            <ul class="list">
                <li>Social community features, challenges, leaderboards, and gamification</li>
                <li>Integrated nutrition tracking, barcode scanning, and food database integration</li>
                <li>Advanced mental‑wellness modules and meditation content</li>
                <li>FDA‑cleared medical diagnostics or therapeutic claims</li>
                <li>Multi‑device sync beyond phone‑to‑wearable (e.g., tablet, web portal)</li>
            </ul>
        </section>

        <section id="business-goals">
            <h2>Business Goals</h2>
            <ul class="list">
                <li>Achieve 1 million active users within 12 months of launch.</li>
                <li>Generate 30 % of revenue from premium subscription tier by year 2.</li>
                <li>Maintain user churn rate below 5 % per quarter through engagement features.</li>
                <li>Attain compliance certifications (ISO/IEC 27001, HIPAA, GDPR) before public release.</li>
                <li>Establish strategic integrations with at least three major wearable manufacturers.</li>
            </ul>
        </section>

        <section id="use-cases">
            <h2>Use Cases</h2>

            <div class="use-case" id="usecase-1">
                <h3>Secure User Registration, Authentication &amp; Consent Management</h3>
                <p><strong>Primary Actor:</strong> End‑User</p>
                <p><strong>Secondary Actors:</strong> Authentication Service, Consent Management Service, System Administrator</p>
                <p><strong>Description:</strong> Allows a new user to create an account, authenticate via OAuth 2.0 / OpenID Connect, grant consent for health data access, and configure privacy preferences in compliance with GDPR, CCPA, HIPAA, and COPPA where applicable.</p>
                <h4>Main Flow</h4>
                <ol class="list">
                    <li>User selects 'Sign Up' and chooses an authentication provider (email/password, Google, Apple, etc.).</li>
                    <li>System redirects to OAuth 2.0 / OIDC provider for credential verification.</li>
                    <li>Upon successful authentication, system presents the Consent Management screen displaying data categories (activity, heart‑rate, sleep, nutrition, mental‑wellness).</li>
                    <li>User reviews and selects consent scopes; system records consent using a consent receipt stored encrypted at rest.</li>
                    <li>System creates a minimal user profile (UUID, locale, device IDs) and encrypts all PHI per ISO/IEC 27001.</li>
                    <li>System sends a verification email/SMS; user confirms the account.</li>
                    <li>System logs the registration event for audit (HIPAA audit trail).</li>
                    <li>User is redirected to the onboarding wizard.</li>
                </ol>
                <h4>Alternative Flows</h4>
                <div class="flow">
                    <p><strong>A1 – User declines consent for a specific data category.</strong></p>
                    <ol class="list">
                        <li>System disables features that depend on the declined data (e.g., real‑time HR tracking).</li>
                        <li>User can continue with reduced functionality or abort registration.</li>
                    </ol>
                </div>
                <div class="flow">
                    <p><strong>A2 – Network unavailable during registration.</strong></p>
                    <ol class="list">
                        <li>System stores the registration request locally in an encrypted queue.</li>
                        <li>When connectivity is restored, the request is transmitted securely.</li>
                    </ol>
                </div>
            </div>

            <div class="use-case" id="usecase-2">
                <h3>Wearable Sensor Integration &amp; Real‑Time Health Data Sync</h3>
                <p><strong>Primary Actor:</strong> End‑User</p>
                <p><strong>Secondary Actors:</strong> Wearable Device, Sync Service, AI Coaching Engine</p>
                <p><strong>Description:</strong> Enables seamless connection to BLE wearables, imports heart‑rate, SpO2, sleep, and activity metrics using open standards (BLE GATT, FHIR), provides offline‑first sync with conflict resolution, and updates the UI with real‑time feedback.</p>
                <h4>Main Flow</h4>
                <ol class="list">
                    <li>User navigates to 'Connect Device' and selects their wearable model from a curated list.</li>
                    <li>System initiates BLE scanning using standard GATT profiles.</li>
                    <li>User pairs the device; system validates the device's certificate.</li>
                    <li>System subscribes to relevant sensor characteristics (HR, SpO2, accelerometer).</li>
                    <li>Sensor data streams to the app; Sync Service buffers data locally (offline‑first).</li>
                    <li>Every 5 seconds, Sync Service transforms raw data into FHIR Observation resources.</li>
                    <li>Data is encrypted and uploaded via RESTful API (OpenAPI spec) to the backend.</li>
                    <li>Backend performs conflict resolution (last‑write‑wins with timestamp) and stores observations in a HIPAA‑compliant datastore.</li>
                    <li>AI Coaching Engine consumes the latest metrics to adjust workout intensity and provides haptic/audio cues.</li>
                </ol>
                <h4>Alternative Flows</h4>
                <div class="flow">
                    <p><strong>A1 – Connection drops.</strong></p>
                    <ol class="list">
                        <li>Sync Service caches incoming data locally.</li>
                        <li>System attempts automatic reconnection every 10 seconds.</li>
                        <li>Upon reconnection, buffered data is transmitted.</li>
                    </ol>
                </div>
                <div class="flow">
                    <p><strong>A2 – User revokes consent for HR data.</strong></p>
                    <ol class="list">
                        <li>System stops streaming HR characteristic.</li>
                        <li>Existing HR data is anonymized or deleted per retention policy.</li>
                    </ol>
                </div>
            </div>

            <div class="use-case" id="usecase-3">
                <h3>AI‑Driven Personalized Workout Recommendation &amp; Adaptive Coaching</h3>
                <p><strong>Primary Actor:</strong> End‑User</p>
                <p><strong>Secondary Actors:</strong> AI Recommendation Engine, Workout Content Service, Coach (optional human trainer)</p>
                <p><strong>Description:</strong> Generates individualized workout plans using AI models that consider user goals, performance history, wearable data, and mental‑wellness state, and dynamically adapts sessions in real time.</p>
                <h4>Main Flow</h4>
                <ol class="list">
                    <li>User opens the 'My Plan' screen and selects 'Generate New Plan' or 'Refresh Plan'.</li>
                    <li>AI Recommendation Engine retrieves user goals, recent performance metrics, and mental‑wellness scores (e.g., stress level from HRV).</li>
                    <li>Engine applies a hybrid rule‑based + machine‑learning algorithm to select appropriate workouts from the content catalog.</li>
                    <li>Engine creates a 4‑week progressive plan with daily sessions, intensity levels, and optional nutrition recommendations.</li>
                    <li>Plan is presented with visual progress bars, estimated calories, and mental‑wellness tips.</li>
                    <li>During a workout, the engine monitors live sensor data; if heart‑rate exceeds safe thresholds, it reduces intensity and issues audio/haptic alerts.</li>
                    <li>Post‑session, the engine updates the user’s performance profile and recalibrates the upcoming plan.</li>
                    <li>User may request a human coach review; the system forwards the plan and recent data to the coach portal.</li>
                </ol>
                <h4>Alternative Flows</h4>
                <div class="flow">
                    <p><strong>A1 – Insufficient data for AI model (new user).</strong></p>
                    <ol class="list">
                        <li>System falls back to a rule‑based starter plan based on selected goals.</li>
                        <li>User is prompted to complete a quick fitness questionnaire to enrich the model.</li>
                    </ol>
                </div>
                <div class="flow">
                    <p><strong>A2 – User opts out of AI personalization.</strong></p>
                    <ol class="list">
                        <li>System provides static curated workout programs without adaptive adjustments.</li>
                    </ol>
                </div>
            </div>
        </section>

        <section id="non-functional-requirements">
            <h2>Non‑Functional Requirements</h2>
            <ul class="list">
                <li><strong>Security:</strong> All sensitive health data must be encrypted at rest using AES‑256 and in transit using TLS 1.3; access is controlled via OAuth 2.0 / OpenID Connect with least‑privilege scopes.</li>
                <li><strong>Performance:</strong> 95 % of user‑initiated actions (e.g., data sync, plan generation) must complete within 2 seconds under normal network conditions.</li>
                <li><strong>Compliance:</strong> The system shall satisfy HIPAA, GDPR, CCPA, and ISO/IEC 27001 requirements, providing audit logs, consent receipts, and data‑subject request capabilities.</li>
            </ul>
        </section>
    </div>

    <footer>
        <div class="logo">AICOE</div>
        <p style="margin:10px 0 0;">© 2025 AICOE. All rights reserved.</p>
    </footer>
</body>
</html>